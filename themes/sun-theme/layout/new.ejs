<!DOCTYPE html>
<html lang="zh-CN">
<head>
  Â  <meta charset="UTF-8">
  Â  <title>æ–°å»ºæ–‡ç« </title>
  </head>
<body>
  Â  <h1>ğŸ“ æ–°å»ºæ–‡ç« </h1>
	  <!-- è¯´æ˜ï¼š
	       - æœ¬é¡µé¢æ˜¯ä¸€ä¸ªç®€å•çš„â€œæ–°å»ºæ–‡ç« â€å‰ç«¯ç¤ºä¾‹ï¼Œä¼šç”Ÿæˆç¬¦åˆ Hexo ä¹ æƒ¯çš„æ–‡ä»¶åï¼ˆYYYY-MM-DD-slug.mdï¼‰
	       - ä¼šåœ¨ Markdown æ–‡ä»¶å¤´éƒ¨è‡ªåŠ¨ç”Ÿæˆ YAML Front-Matterï¼ˆtitle ä¸ dateï¼‰ï¼Œç„¶åæŠŠå®Œæ•´å†…å®¹å‘åˆ°åç«¯ APIï¼ˆ/api/savePostï¼‰
	       - å¼ºçƒˆå»ºè®®ï¼šåç«¯å¿…é¡»åšä¸¥æ ¼æ ¡éªŒï¼ˆè®¤è¯ã€filePath ç™½åå•ã€å†…å®¹ & è·¯å¾„å®‰å…¨æ£€æŸ¥ã€é€Ÿç‡é™åˆ¶ï¼‰
	  -->
  Â  <input id="title" placeholder="è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶åï¼‰">
  Â  <textarea id="content" placeholder="è¯·è¾“å…¥æ–‡ç« å†…å®¹..."></textarea>
  Â  <button id="save">åˆ›å»ºæ–‡ç« </button>

  Â  <script>
Â  Â  // ä¸ºâ€œåˆ›å»ºæ–‡ç« â€æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
Â  Â  document.getElementById("save").onclick = async () => {
Â  Â  Â  // 1. è·å–è¾“å…¥æ¡†çš„å€¼
Â  Â  Â  const title = document.getElementById("title").value.trim(); // è·å–æ ‡é¢˜å¹¶å»é™¤é¦–å°¾ç©ºæ ¼
Â  Â  Â  const content = document.getElementById("content").value; // è·å–æ–‡ç« å†…å®¹

Â  Â  Â  // 2. åŸºç¡€æ•°æ®æ ¡éªŒ
Â  Â  Â  if (!title || !content) {
Â  Â  Â  Â  alert("æ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©º");
Â  Â  Â  Â  return; // å¦‚æœä¸ºç©ºï¼Œåˆ™ç»ˆæ­¢åç»­æ“ä½œ
Â  Â  Â  }

Â  Â  Â  // 3. åŠ¨æ€ç”Ÿæˆæ–‡ä»¶è·¯å¾„ (Hexo åšå®¢ç»“æ„)
Â  Â  Â  // æ›¿æ¢æ ‡é¢˜ä¸­çš„æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆ\s+ï¼‰ä¸ºçŸ­æ¨ªçº¿ï¼ˆ-ï¼‰ï¼Œå¹¶ä½œä¸ºæ–‡ä»¶åã€‚
Â  Â  Â  // æ–‡ä»¶è·¯å¾„æ ¼å¼ï¼šsource/_posts/æ–‡ç« æ ‡é¢˜-ç”¨-çŸ­æ¨ªçº¿-è¿æ¥.md
Â  Â  Â  const filePath = `source/_posts/${title.replace(/\s+/g, '-')}.md`;
      
      // 4. å‘é€ POST è¯·æ±‚åˆ° Serverless Function (API)
Â  Â  Â  const res = await fetch("https://blog-source-lime.vercel.app/api/savePost", {
Â  Â  Â  Â  method: "POST", // ä½¿ç”¨ POST æ–¹æ³•æäº¤æ•°æ®
Â  Â  Â  Â  headers: { "Content-Type": "application/json" }, // å‘ŠçŸ¥æœåŠ¡å™¨è¯·æ±‚ä½“æ˜¯ JSON æ ¼å¼
Â  Â  Â  Â  body: JSON.stringify({ // å°†æ•°æ®å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²
Â  Â  Â  Â  Â  filePath, // æ–°æ–‡ç« çš„å®Œæ•´æ–‡ä»¶è·¯å¾„
Â  Â  Â  Â  Â  content, // æ–‡ç« çš„ Markdown å†…å®¹
Â  Â  Â  Â  Â  message: `æ–°å»ºæ–‡ç« ï¼š${title}`, // æäº¤åˆ° GitHub æ—¶çš„ Commit æ¶ˆæ¯
Â  Â  Â  Â  }),
Â  Â  Â  });
      
      // 5. è§£æå¹¶å¤„ç† API å“åº”
Â  Â  Â  const data = await res.json();
Â  Â  Â  
Â  Â  Â  // æ ¹æ® API è¿”å›çš„ success å­—æ®µåˆ¤æ–­æ“ä½œç»“æœ
Â  Â  Â  if (data.success) {
Â  Â  Â  Â  alert("âœ… æ–‡ç« å·²åˆ›å»ºï¼Œå‡ åˆ†é’Ÿåä¼šè‡ªåŠ¨éƒ¨ç½²ï¼");
Â  Â  Â  } else {
Â  Â  Â  Â  alert("âŒ å‡ºé”™ï¼š" + data.error);
Â  Â  Â  }
Â  Â  };
Â  </script>
</body>
</html>